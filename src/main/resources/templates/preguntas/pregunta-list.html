<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      lang="es_ES">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

    <!-- Estilos personalizados -->
    <link href="" type="text/css" rel="stylesheet">
    <title>Foro</title>
</head>
<body>
        <!-- Contenido de la página -->
        <section class="container" style="width: 60%; margin:auto;">
                <div>
                        <h2>Preguntas</h2>
                        <a th:href="@{/preguntas/new}" class="btn border-dark">Hacer una pregunta</a>
                        <div class="input-group align-items-center">
                                <form th:action="@{/preguntas/search}" th:method="post">
                                        <input name="search" type="search" class="form-control rounded" placeholder="Search" aria-label="Search" aria-describedby="search-addon">
                                        <button  type="submit" class="btn btn-outline-primary">search</button>
                                </form>
                        </div>

                        <div>
                        <label for="filtros">Filtrar por:</label>
                                <!-- Hacer que los dropdown apliquen el filtro directamente después de darles -->
                                <select name="filtros" id="filtros">
                                        <option value="default">Seleccione un filtro</option>
                                        <option value="fechaNew">Más Recientes</option>
                                        <option value="fechaOld">Más Antiguas</option>
                                        <option value="votos">Mejor Valorados</option>
                                </select>
                        </div>

                        <!-- Preguntas publicadas -->
                        <div th:each="pregunta: ${paginaPreguntas.content}" class="row border-top border-bottom p-2">
                                <div class="col-3 align-self-center">
                                        <a href="#!" style="border: 2px; border-style: solid;">Img</a>
                                        <a href="/version1/perfil/{id}">UsuarioQuePregunta</a>
                                        <div class="container-fluid">
                                                <ul>
                                                        <li th:text="${pregunta.getFechaPregunta()}">Fecha:</li>
                                                        <li><span>Votos: </span><span th:text="${pregunta.getVotos()} ?: '0'"></span></li>
                                                </ul>    
                                        </div>
                                </div>
                                <div class="col-9 align-self-center">
                                        <a th:href="@{preguntas/preguntaPublicada/{id}(id=${pregunta.getId()})}"><h3 class="text-truncate overflow-hidden" th:text="${pregunta.getTituloPregunta()}"> Pregunta1</h3></a>
                                        <!-- Ver como se hace para que el overflow termine en puntos suspensivos -->
                                        <p th:text="${pregunta.getTextoPregunta()}" class="text-truncate overflow-hidden" style="max-height: 100px;">Lorem ipsum dolor sit amet consectetur adipiscing elit non habitasse semper, eleifend cum suspendisse class velit hendrerit fringilla euismod vestibulum ad, sodales etiam praesent maecenas purus cubilia venenatis feugiat faucibus. Praesent ligula habitasse fusce parturient faucibus maecenas vivamus, magna suspendisse urna felis dignissim penatibus ut, ultrices lacinia ridiculus id senectus
                                        </p>
                                        <div class="container">
                                                <a th:each="categoria : ${pregunta.getCategorias()}" class="mx-2"  href="#!" th:text="${categoria.getNombre()}">Tag1</a>
                                        </div>
                                </div>
                        </div>
                        <!-- Navegación de páginas -->
                        <nav th:if="${paginaPreguntas.totalPages > 0}" aria-label="Page navigation">
                                <ul class="pagination justify-content-center">
                                        <li class="page-item" th:each="numeroPagina : ${numeroPaginas}">
                                                <a class="page-link" th:href="@{/preguntas(size=${paginaPreguntas.size}, page=${numeroPagina})}" th:text=${numeroPagina} th:classappend="${numeroPagina==paginaPreguntas.number + 1} ? active">1</a>
                                        </li>
                                </ul>
                        </nav>
                        
                </div>
        </section>






<!-- Optional JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
        integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
        crossorigin="anonymous"></script>
</body>
</html>